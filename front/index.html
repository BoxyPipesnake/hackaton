<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cultivos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="dashboard.css" />
  </head>
  <body class="">
    <main class="dashboard-container d-flex vh-100">
      <aside class="dashboard-aside p-3 pt-5 col-2 bg-success">
        <h1 class="mb-5 text-white text-center">CultivaTI</h1>
        <a class="fw-bold text-decoration-none text-uppercase d-block text-white mb-5" href="#">
          <span>icon</span>
          Dashboard
        </a>
        <a class="fw-bold text-decoration-none text-uppercase d-block mb-5 text-white" href="#">
          <span>icon</span>
          Seccion 1
        </a>
        <a class="fw-bold text-decoration-none text-uppercase d-block mb-5 text-white" href="#">
          <span>icon</span>
          Seccion 2
        </a>
        <a class="fw-bold text-decoration-none text-uppercase d-block mb-5 text-white" href="#">
          <span>icon</span>
          Seccion 3
        </a>
        <a class="fw-bold text-decoration-none text-uppercase d-block text-white mb-5" href="#">
          <span>icon</span>
          Seccion 4
        </a>
      </aside>

      <section class="stats-section container col  m-0 p-0">
        <nav class="stats-nav p-4 bg-success col font-weight-bolder">
          <h3 class="text-white">Dashboard</h3>
        </nav>
        <!-- Despliegue de informacion -->

        <div id="sistemasContainer" class="p-3 d-flex flex-wrap"></div>

        <div class="table-responsive mt-4">
          <table id="sistemasTable" class="table table-striped">
            <thead>
              <tr>
                <th scope="col">Cliente</th>
                <th scope="col">Sistema de riego</th>
                <th scope="col">Campo 1</th>
                <th scope="col">Campo 2</th>
                <th scope="col">Campo 3</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const sistemasContainer =
            document.getElementById("sistemasContainer");
          const sistemasTable = document
            .getElementById("sistemasTable")
            .getElementsByTagName("tbody")[0];

          let sistemaCount = 0;

          sistemasContainer.addEventListener("click", function (event) {
            const target = event.target;
            if (target.classList.contains("sistema-riego")) {
              const sistemaId = target.getAttribute("data-sistema-id");
              const sistemaInfo = getSystemInfo(sistemaId); // Obtener información relevante del sistema de riego

              const sistemaRow = createSistemaRow(sistemaId, sistemaInfo);
              sistemasTable.appendChild(sistemaRow);
            }
          });

          function getSystemInfo(sistemaId) {
            // Aquí puedes obtener la información relevante del sistema de riego
            // Puedes reemplazar esta lógica con tu propia lógica para obtener información aleatoria
            const sistemaInfo = {
              "sistema-1": {
                cliente: "Cliente 1",
                campo1: "Lorem ipsum",
                campo2: "Lorem ipsum",
                campo3: "Lorem ipsum",
              },
              "sistema-2": {
                cliente: "Cliente 2",
                campo1: "Lorem ipsum",
                campo2: "Lorem ipsum",
                campo3: "Lorem ipsum",
              },
              "sistema-3": {
                cliente: "Cliente 3",
                campo1: "Lorem ipsum",
                campo2: "Lorem ipsum",
                campo3: "Lorem ipsum",
              },
            };

            return sistemaInfo[sistemaId] || {};
          }

          function createSistemaRow(sistemaId, sistemaInfo) {
            const sistemaRow = document.createElement("tr");

            const clienteCell = document.createElement("td");
            clienteCell.textContent = sistemaInfo.cliente || "";
            sistemaRow.appendChild(clienteCell);

            const sistemaCell = document.createElement("td");
            sistemaCell.textContent = sistemaId;
            sistemaRow.appendChild(sistemaCell);

            const campo1Cell = document.createElement("td");
            campo1Cell.textContent = sistemaInfo.campo1 || "";
            sistemaRow.appendChild(campo1Cell);

            const campo2Cell = document.createElement("td");
            campo2Cell.textContent = sistemaInfo.campo2 || "";
            sistemaRow.appendChild(campo2Cell);

            const campo3Cell = document.createElement("td");
            campo3Cell.textContent = sistemaInfo.campo3 || "";
            sistemaRow.appendChild(campo3Cell);

            return sistemaRow;
          }

          // Agregar sistemas de riego inicialmente
          addSistemaRiego();

          function addSistemaRiego() {
            const sistemaId = `sistema-${sistemaCount}`;

            const sistemaElement = document.createElement("div");
            sistemaElement.classList.add(
              "alert",
              "alert-primary",
              "sistema-riego",
              "align-items-center",
              "col-6"
            );
            sistemaElement.setAttribute("data-sistema-id", sistemaId);
            sistemaElement.textContent = `Sistema ${sistemaCount + 1}`;

            sistemasContainer.appendChild(sistemaElement);

            sistemaCount++;
          }
        });
      </script>
    </main>
  </body>
</html>
