<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cultivos</title>
    <!-- <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    /> -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="dashboard.css" />
  </head>
  <body class="">
    <main class="dashboard-container d-flex vh-100">
      <aside class="dashboard-aside p-3 pt-5 col-2 bg-dark">
        <h1 class="mb-5 text-white text-center">CultivaTI</h1>
        <a class="d-block mb-5" href="#">
          <span>icon</span>
          Dashboard
        </a>
        <a class="d-block mb-5" href="#">
          <span>icon</span>
          Seccion 1
        </a>
        <a class="d-block mb-5" href="#">
          <span>icon</span>
          Seccion 2
        </a>
        <a class="d-block mb-5" href="#">
          <span>icon</span>
          Seccion 3
        </a>
        <a class="d-block mb-5" href="#">
          <span>icon</span>
          Seccion 4
        </a>
      </aside>

      <section class="stats-section container col bg-secondary m-0 p-0">  
        <nav class="stats-nav p-4 bg-dark col font-weight-bolder">
          <h3 class="text-white">Dashboard</h3>
        </nav>
        <!-- Despliegue de informacion -->

        <button
          id="agregarSistemaBtn"
          class="btn btn-lg bg-success text-white font-weight-bolder mt-3 ms-3"
        >
          Agregar sistema de riego
        </button>

        <div id="sistemasContainer" class="p-3 d-flex flex-wrap "></div>
      </section>

      <div
        class="modal fade"
        id="myModal"
        tabindex="-1"
        aria-labelledby="myModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="myModalLabel">
                Información del Sistema
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <p id="sistemaInfo" class="pop-up-content">
                Información relevante del sistema de riego.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const agregarSistemaBtn = document.getElementById("agregarSistemaBtn");
        const sistemasContainer = document.getElementById("sistemasContainer");
        const sistemaInfoElement = document.getElementById("sistemaInfo");

        let sistemaCount = 0;

        agregarSistemaBtn.addEventListener("click", function () {
          addSistemaRiego();
        });

        sistemasContainer.addEventListener("click", function (event) {
          const target = event.target;
          if (target.classList.contains("sistema-riego")) {
            const sistemaId = target.getAttribute("data-sistema-id");
            const sistemaInfo = getSystemInfo(sistemaId); // Obtener información relevante del sistema de riego

            sistemaInfoElement.textContent = sistemaInfo;

            // Mostrar el modal
            const myModal = new bootstrap.Modal(
              document.getElementById("myModal")
            );
            myModal.show();
          }
        });

        function getSystemInfo(sistemaId) {
          // Aquí puedes obtener la información relevante del sistema de riego
          // Puedes reemplazar esta lógica con tu propia lógica para obtener información aleatoria
          const sistemaInfo = {
            "sistema-1": "Información del Sistema 1",
            "sistema-2": "Información del Sistema 2",
            "sistema-3": "Información del Sistema 3",
          };

          return sistemaInfo[sistemaId] || "No hay información disponible";
        }

        function addSistemaRiego() {
          const sistemaId = `sistema-${sistemaCount}`;

          const sistemaElement = document.createElement("div");
          sistemaElement.classList.add(
            "alert",
            "alert-primary",
            "sistema-riego",
            "align-items-center",
            "col-6",
          );
          sistemaElement.setAttribute("data-sistema-id", sistemaId);
          sistemaElement.textContent = `Sistema ${sistemaCount + 1}`;

          sistemasContainer.appendChild(sistemaElement);

          sistemaCount++;
        }
      });
    </script>
  </body>
</html>
